# █░█░█ █ █▄░█ █▀▄ █▀█ █░█░█   █▀█ █░█ █░░ █▀▀ █▀
# ▀▄▀▄▀ █ █░▀█ █▄▀ █▄█ ▀▄▀▄▀   █▀▄ █▄█ █▄▄ ██▄ ▄█

# See https://wiki.hyprland.org/Configuring/Window-Rules/

#? ------- WINDOWRULES_HYPRLAND_V_0_53 COMPATIBLE ----------------
#   This Config is compatible with windowrules changes in Hyprland v0.53+



## IDLE INHIBIT (media / browsers)
## ─────────────────────────────────────────────
windowrulev2 = idleinhibit, focus, class:^(mpv)$
windowrulev2 = idleinhibit, focus, class:^(smplayer)$
windowrulev2 = idleinhibit, focus, class:^([Ss]potify)$
windowrulev2 = idleinhibit, focus, class:^(zen|zen-browser|zen-alpha)$


# BROWSER & SPOTIFY PICTURE-IN-PICTURE 
# ─────────────────────────────────────────────
windowrule {
    name = pip_windows
    tag = +pip
    match:title =  ^(?i)picture[-\s]?in[-\s]?picture.*$
    float = true
    pin = true
    move = (monitor_w*.73) (monitor_h*.72)
    size = (monitor_w*.25) (monitor_h*.25)
}


## SPOTIFY
## ─────────────────────────────────────────────

# Main window
windowrulev2 = tile, class:^([Ss]potify)$
windowrulev2 = opacity 0.80 0.70, class:^([Ss]potify)$
### Spotify dialogs / popups (excluding PiP which is handled above)
windowrulev2 = float, class:^([Ss]potify)$, title:^(Spotify Settings|Edit playlist)$
windowrulev2 = center, class:^([Ss]potify)$, floating:1


## ZEN BROWSER
## ─────────────────────────────────────────────

# Main window - force tile for non-PiP windows
windowrulev2 = tile, class:^(zen|zen-browser|zen-alpha)$, title:^(?!Picture-in-Picture$).*$
windowrulev2 = opacity 0.80 0.70, class:^(zen|zen-browser|zen-alpha)$
### Browser dialogs (excluding PiP which is handled above)
windowrulev2 = float, class:^(zen|zen-browser|zen-alpha)$, title:^(Save As|Open File|File Upload)$
windowrulev2 = center, class:^(zen|zen-browser|zen-alpha)$, floating:1, title:^(Save As|Open File|File Upload)$


## KITTY
## ─────────────────────────────────────────────

# Normal kitty
windowrulev2 = tile, class:^(kitty)$
windowrulev2 = opacity 0.60 0.50, class:^(kitty)$
### Floating kitty
windowrulev2 = float, class:^(kitty-floating)$
windowrulev2 = size 60% 60%, class:^(kitty-floating)$
windowrulev2 = center, class:^(kitty-floating)$


## DOLPHIN
## ─────────────────────────────────────────────

# Main window
windowrulev2 = tile, class:^(org.kde.dolphin)$
windowrulev2 = opacity 0.80 0.70, class:^(org.kde.dolphin)$
### Dolphin dialogs / progress
windowrulev2 = float, class:^(org.kde.dolphin)$, title:^(Copying|Moving|Deleting|Properties|Progress)$
windowrulev2 = center, class:^(org.kde.dolphin)$, floating:1
#TODO: how to set size, pos for "choose file" windows?


## MEDIA PLAYERS
## ─────────────────────────────────────────────
windowrulev2 = tile, class:^(mpv|smplayer)$
windowrulev2 = opacity 1.0 1.0, class:^(mpv|smplayer)$
### SMPlayer dialogs
windowrulev2 = float, class:^(smplayer)$, title:^(Preferences|Open)$
windowrulev2 = center, class:^(smplayer)$, floating:1


## GENERIC DIALOGS (SAFE & MINIMAL)
## ─────────────────────────────────────────────
windowrulev2 = float, modal:1
windowrulev2 = center, modal:1
windowrulev2 = opacity 1.0 override, modal:1


## AUTH / SYSTEM DIALOGS
## ─────────────────────────────────────────────
windowrulev2 = float, class:^(org.kde.polkit-kde-authentication-agent-1|polkit-gnome-authentication-agent-1)$
windowrulev2 = center, class:^(org.kde.polkit-kde-authentication-agent-1|polkit-gnome-authentication-agent-1)$
windowrulev2 = opacity 1.0 override, class:^(org.kde.polkit-kde-authentication-agent-1|polkit-gnome-authentication-agent-1)$

windowrulev2 = float, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = center, class:^(xdg-desktop-portal-gtk)$


## FULLSCREEN SAFETY
## ─────────────────────────────────────────────
windowrulev2 = opacity 1.0 override, fullscreen:1


## LAYER RULES
## ─────────────────────────────────────────────
layerrule = blur true, match:namespace rofi
layerrule = ignore_alpha 0, match:namespace rofi

layerrule = blur true, match:namespace notifications
layerrule = ignore_alpha 0, match:namespace notifications

layerrule = blur true, match:namespace swaync-notification-window
layerrule = ignore_alpha 0, match:namespace swaync-notification-window

layerrule = blur true, match:namespace swaync-control-center
layerrule = ignore_alpha 0, match:namespace swaync-control-center

layerrule = blur true, match:namespace logout_dialog



